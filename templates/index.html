<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Pumpkin Pi</title>
		<link
			rel="stylesheet"
			type="text/css"
			href="{{url_for('static',filename='style.css')}}"
		/>
	</head>
	<body>
		<section id="banner"></section>
		<main id="photoBooth">
			<div id="photos">
				{% for image in images %}
				<div class="photo">
					<img src="{{ image }}" />
					<button data-url="{{image}}" class="sendPic">Send Me Dis</button>
				</div>
				{% endfor %}
			</div>
		</main>
		<div class="modal hide">
			<div class="modal-content">
				<span class="close">&times;</span>
				<form>
					<p>Enter Your email to send the Picture</p>
					<img src="" />
					<div class="userInput">
						<input id="userEmail" type="email" />
						<a href="">Send</a>
					</div>
				</form>
			</div>
		</div>
		<script>
			// Show the modal whenever user click sendpic button
			document.body.addEventListener('click', function (e) {
				if (e.target.matches('.sendPic')) {
					const url = e.target.dataset.url;
					document.querySelector('.modal img').src = url;
					document.querySelector('.modal').classList.remove('hide');
				}
			});
			// Get the modal
			let modal = document.querySelector('.modal');
			// Get the <span> element that closes the modal
			let span = document.getElementsByClassName('close')[0];
			let email = document.getElementById('userEmail');

			email.addEventListener('input', function (e) {
				let email = e.target.value;
				console.log(email);
				document.querySelector(
					'.modal a'
				).href = `mailto:{email}&subject=Picture From PumpkinPi`;

				// document.querySelector('.modal img')
			});
			// When the user clicks on <span> (x), close the modal
			span.onclick = function () {
				modal.classList.add('hide');
			};
		</script>
	</body>
</html>
